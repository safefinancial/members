div.bg-red.relative
	div.hidden.absolute.inset-y-0.right-0(class="w-1/2 lg:block")
		img.hidden.object-cover.h-full.w-full(src='/img/about-page.jpeg' class="lg:block")
		div.hidden.absolute.inset-y-0.left-0.bg-gradient-to-l.from-transparent.to-red(class="w-1/3 lg:block")

	div.container.text-center.text-white.py-12.grid.gap-8.remove-mb(class="lg:py-32 lg:grid-cols-2")
		div
			h1.text-4xl.mb-6 Safe Financial %LoanType Loans
			p.text-lg.mb-0 Lorem ipsum dolor sit amet consectetur adipisicing elit. Totam saepe natus laudantium dolore fugiat tempore quae recusandae quos numquam, soluta magni harum, reiciendis cum a itaque tempora possimus dolorum veritatis?

div.bg-boxgrey-dark.relative
	div.container.grid.gap-8.remove-mb(class="lg:grid-cols-2 lg:place-items-center")
		div.text-center.order-last.mb-12(class="lg:order-first lg:mb-0")
			h2.text-white.text-3xl.mb-6 WIN $1,000*
			p.text-white.text-sm.mb-4 *This month, when you take out a mini loan, car loan or business loan, you could WIN $1,000 cash
			p.text-xs.text-white
				a.underline(href="#") Competition rules
				| |
				a.underline(href="#") View monthly winners

		div.relative.w-full
			div.rounded-xl.bg-boxgrey.drop-shadow-lg.p-10.relative.z-10.-mt-6(class="lg:-mt-96 lg:-mb-8")
				p.text-center.text-xl.font-bold How much do you need to borrow?

				div.hero-range.relative.mt-16.h-12
					input(type="range" class="form-range appearance-none w-full mt-2.5 h-6 p-0 bg-transparent focus:outline-none focus:ring-0 focus:shadow-none" value="2500" min="500" max="5000" step="500" id="loanRange")
					output(class="form-range-tt rounded-lg px-4 py-2 text-lg bg-darkgrey text-white font-bold" title="test")

				div.flex.justify-between.mb-8
					p.text-base.font-bold $500
					p.text-base.font-bold $5,000
				p.text-center.text-xl.font-bold.mb-4 Select how often you wish to repay
				div.flex.flex-wrap.-mx-1.mb-4
					each item in ["Weekly", "Fortnightly", "Monthly"]
						div.p-1.w-full(class='sm:w-1/3')
							p.std-block.p-4.font-bold=item
				div.flex.flex-wrap.-mx-1.mb-5
					div.p-1.w-full
						div.rounded-xl.p-6.text-center.bg-white.border-2.border-red
							p.text-xl.font-bold.mb-4 Your repayment is:
							p.text-3xl.mb-6
								span.text-red $75.54
								|  over
								span.text-red  32
								|  months
							a.inline-block.mx-auto.btn.btn-round.btn-large(href='#') Apply Now
				p.text-sm.text-center New customers must work and earn $500+/wk to be eligible to apply.

script.
	const rangeWrap = document.querySelectorAll(".hero-range");
	rangeWrap.forEach(wrap => {
		const range = wrap.querySelector(".form-range");
		const bubble = wrap.querySelector(".form-range-tt");
		var thumbWidth = 24;

		range.addEventListener("input", () => {
			setBubble(range, bubble);
		});
		setBubble(range, bubble);
	});

	function setBubble(range, bubble) {
		const val = range.value;
		const min = range.min ? range.min : 0;
		const max = range.max ? range.max : 100;
		const newVal = Number(((val - min) * 100) / (max - min));
		var formatter = new Intl.NumberFormat('en-AU', {
			style: 'currency',
			currency: 'AUD',
			maximumSignificantDigits: 2,
		});
		bubble.title = formatter.format(val);
		bubble.innerHTML = formatter.format(val);
		//- calculation to keep the tool tip in the center of the range thumb
		bubble.style.left = `calc(${newVal}% + (${12 - newVal * 0.24}px)`;
	}